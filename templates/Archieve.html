{% extends 'sidenav.html' %}
{% block content %}
<br>
<br>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/274ee977b7.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <title>Document</title>
    {% load static %}
    <style>
     body {
      background-color: rgb(247, 249, 250);
  padding: 20px;
}

.card {
            height: 300px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s;
            border-color: black;
            border-radius: 10px;
        }

        html {
                position: relative;
                min-height: 100%;
            }
        body {
                margin-bottom: 0px; /* Height of the footer */
            }
    </style>
    
    
  </head>
  <body>
      

    <div class="container mt-3 mb-3 p-3">
      <h3 style="text-align: center;" ><b>Archieve</b></h3>

        <div class="row">
            
                {% if '1' not in item_ids %}
                <div class="col-sm-3 mt-3">
                <div id="card{{ '1' }}" class="card">
                    
                  <div class="card-body" style="background-color: rgb(165, 163, 163);">
                    <h5 class="card-title"style="color: white;">Card 1</h5>
                    <p class="card-text"style="color: white;text-align: justify;">Technical progress is refers to discovery of new and improved methods producing goods.</p>
                  <br>
                    <div class="text-center">
                      <button class="undoButton btn" style="background-color: azure;color:black;" data-item-id="{{ '1' }}">undo</button>
                    </div>
                    
                  </div>
                    
                    

                </div>
                </div>
                {% endif %}

                {% if '2' not in item_ids %}
                <div class="col-sm-3 mt-3">
                <div id="card{{ '2' }}" class="card">
                    
                  <div class="card-body" style="background-color: rgb(165, 163, 163);">
                    <h5 class="card-title"style="color: white;text-align:center;">Card 2</h5>
                    <p class="card-text"style="color: white;text-align: justify;">TD is a process in which the application of new knowledge related to technology has visible practical results </p>
                <br>
                    <div class="text-center">
                      <button class="undoButton btn "style="background-color: azure;color:black;" data-item-id="{{ '2' }}">undo</button>
                    </div>
                  </div>
                    

                </div>
                </div>
                {% endif %}
                {% if '3' not in item_ids %}
                <div class="col-sm-3 mt-3">
                <div id="card{{ '3' }}" class="card">
                    
                  <div class="card-body" style="background-color: rgb(165, 163, 163);">
                    <h5 class="card-title"style="color: white;text-align:center;">Card 3</h5>
                    <p class="card-text"style="color: white;text-align: justify;">Technology refers to the process through which inputs are transformed into the outputs</p>
                <br>
                    <div class="text-center">
                      <button class="undoButton btn " style="background-color: azure;color:black;" data-item-id="{{ '3' }}">undo</button>
                    </div>
                  </div>
                    

                </div>
                </div>
                {% endif %}
                {% if '4' not in item_ids %}
                <div class="col-sm-3 mt-3">
                <div id="card{{ '4' }}" class="card">
                    
                  <div class="card-body" style="background-color: rgb(165, 163, 163);">
                    <h5 class="card-title"style="color: white; text-align:center;">Card 4</h5>
                    <p class="card-text"style="color: white;text-align: justify;">Computer speed and power have generally been doubling year</p>
                  <br>
                    <div class="text-center">
                      <button class="undoButton btn " style="background-color: azure;color:black;" data-item-id="{{ '4' }}" >undo</button>
                    </div>
                  </div>
                    

                </div>
                </div>
                {% endif %}


        </div>
      </div>




      <script>



        document.querySelectorAll('.undoButton').forEach(button => {
                button.addEventListener('click', function() {
                    var itemId = this.getAttribute('data-item-id');
                    console.log(itemId)
                    var card = document.getElementById('card' + itemId);
                    card.parentNode.removeChild(card); // Remove the corresponding card from the second page
                    // Update item_ids array
        
                    // Convert item_ids to an array
                    var itemIdsArray = item_ids.split(',');
        
                    // Filter out the item with the specified itemId
                    var updatedItemIdsArray = itemIdsArray.filter(function(id) {
                        return id !== itemId;
                    });
        
                    // Convert the filtered array back to a string
                    item_ids = updatedItemIdsArray.join(',');
                    console.log(item_ids); // Optional: Log the updated item_ids array
                });
            });
        
        
            // Function to retrieve card IDs from the second page and redirect to the first page with updated item_ids
            function redirectToFirstPage() {
              var cardIds = [];
              document.querySelectorAll('.card').forEach(card => {
                  var cardId = card.id.replace('card', '');
                  cardIds.push(cardId);
              });
              var linkToFirstPage = '{% url "dashboard" %}?dashboard=' + cardIds.join(',');
              window.location.href = linkToFirstPage; // Redirect to the first page with card IDs
          }
      
          // Event listener for the link to the first page
          document.getElementById("linkToFirstPage").addEventListener("click", function(event) {
              event.preventDefault();
              redirectToFirstPage();
          });
        
        
              
        
                    
          </script>






  
     

              {% endblock %}


